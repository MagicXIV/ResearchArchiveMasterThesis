"0","# Ensure EFFORT1 and EFFORT2 are numeric"
"0","data$EFFORT1 <- as.numeric(data$EFFORT1)"
"0","data$EFFORT2 <- as.numeric(data$EFFORT2)"
"0","#change values about 10 to NA"
"0","data$EFFORT1 <- ifelse(data$EFFORT1 > 10, NA, data$EFFORT1)"
"0","data$EFFORT2 <- ifelse(data$EFFORT2 > 10, NA, data$EFFORT2)"
"0",""
"0","#rename ST004D01T to gender with the mutate function"
"0","data <- data %>%"
"0","  mutate("
"0","        gender = ST004D01T -1,"
"0","        gender = as.factor(gender)"
"0","      ) "
"0",""
"0","#make variable native"
"0","data <- data %>%"
"0","  mutate("
"0","      Native = as.numeric(IMMIG),"
"0","      Native = dplyr::recode(Native, "
"0","                     `1` = 1,"
"0","                     `2` = 1,"
"0","                     `3` = 0,"
"0","                     `5` = NA_real_,"
"0","                     `7` = NA_real_,"
"0","                     `8` = NA_real_,"
"0","                     `9` = NA_real_, "
"0","                     .default = Native), # Keep all other values the same"
"0","      Native = as.factor(Native)) %>%"
"0","  "
"0","  # Convert specific variables to factors"
"0","    mutate(across("
"0","      c(CNTSCHID, CNTSTUID, BOOKID, ST004D01T, ST019AQ01T, ST127Q03TA, Native), "
"0","      as.factor"
"0","    )) %>%"
"0","    # Convert certain variables to integers"
"0","    mutate(across("
"0","      c(EFFORT1, EFFORT2), "
"0","      as.integer"
"0","    )) %>%"
"0","    # Standardize numerical variables"
"0","    #mutate(across(where(is.numeric), ~ scale(.) %>% as.vector()))"
"0","    mutate(across(where(is.numeric), as.double))"
"0","  "
"0","  # Convert all character variables to factors"
"0","  data[sapply(data, is.character)] <- lapply(data[sapply(data, is.character)], as.factor)"
"0","  "
"0","#make new variable effort"
"0","data <- data %>% "
"0","  dplyr::mutate(effort = (EFFORT2 - EFFORT1), na.rm = TRUE)"
